# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ OTP –Ω–∞ Railway

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
OTP –∫–æ–¥ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ –ø–æ—á—Ç—É, –Ω–æ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é - "Invalid OTP code. Please try again."

## üîç –ü—Ä–∏—á–∏–Ω–∞
–ù–∞ Railway –Ω–µ –±—ã–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—ç—à–∞! Django –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∫—ç—à –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏.

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—ç—à–∞ –≤ `settings_railway.py`:
```python
# Cache –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ - Redis –¥–ª—è Railway, –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
REDIS_URL = os.environ.get('REDIS_URL')
if REDIS_URL:
    CACHES = {
        'default': {
            'BACKEND': 'django.core.cache.backends.redis.RedisCache',
            'LOCATION': REDIS_URL,
            'OPTIONS': {
                'CLIENT_CLASS': 'django_redis.client.DefaultClient',
            }
        }
    }
else:
    # Fallback –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∫—ç—à—É
    CACHES = {
        'default': {
            'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
            'LOCATION': 'unique-snowflake',
        }
    }
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω `django-redis` –≤ `requirements.txt`:
```
django-redis>=5.4.0
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ `auth_views_simple.py`:
- –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è OTP –≤ –∫—ç—à
- –õ–æ–≥–∏ –ø–æ–∏—Å–∫–∞ OTP –≤ –∫—ç—à–µ
- –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

## üöÄ –ö–∞–∫ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å

1. **–ó–∞–∫–æ–º–º–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è**:
   ```bash
   git add .
   git commit -m "Fix OTP cache: Add Redis settings for Railway"
   git push
   ```

2. **Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç** —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–ø–ª–æ–π**:
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ñ—Ä–æ–Ω—Ç
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ OTP –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ –ø–æ—á—Ç—É
   - –í–≤–µ—Å—Ç–∏ OTP –∫–æ–¥ - –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é

## üîç –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Railway:
1. –ó–∞–π–¥–∏ –≤ Railway Dashboard
2. –í—ã–±–µ—Ä–∏ –±–µ–∫–µ–Ω–¥ —Å–µ—Ä–≤–∏—Å
3. –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ "Deployments"
4. –ò—â–∏ —Å—Ç—Ä–æ–∫–∏ —Å üîç, üíæ, ‚ùå –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∫—ç—à–∞

## üìß Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

Email —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- SendGrid API (–æ—Å–Ω–æ–≤–Ω–æ–π)
- reg.ru SMTP (fallback)
- –†–µ–∞–ª—å–Ω—ã–µ –ø–∏—Å—å–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:
- ‚úÖ OTP –∫–æ–¥ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ –ø–æ—á—Ç—É
- ‚úÖ OTP –∫–æ–¥ –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
